{% extends "admin_base.html" %}
{% set section = "productos" %}

{% block contenido %}

<h2 class="titulo-admin">Gestión de Productos</h2>

<a href="{{ url_for('admin_agregar_producto') }}" class="btn-agregar">+ Agregar producto</a>

<div class="tabla-admin">
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Imagen</th>
                <th>Nombre</th>
                <th>Precio</th>
                <th>Stock</th>
                <th>Categoría</th>
                <th>Acciones</th>
            </tr>
        </thead>

        <tbody>

            {% for p in productos %}
            <tr>
                <td>{{ p.id }}</td>

                <td>
                    {% if p.imagen %}
                        <img src="{{ p.imagen }}" width="50">
                    {% else %}
                        <img src="{{ url_for('static', filename='img/no-image.png') }}" width="50">
                    {% endif %}
                </td>

                <td>{{ p.nombre }}</td>

                <td>${{ "{:,.0f}".format(p.precio) }}</td>

                <td>{{ p.stock }}</td>

                <td>
                    {% if p.categoria %}
                        {{ p.categoria.nombre }}
                    {% else %}
                        Sin categoría
                    {% endif %}
                </td>

                <td>
                    <a href="{{ url_for('admin_editar_producto', id=p.id) }}" class="btn-editar">Editar</a>

                    <form action="{{ url_for('admin_eliminar_producto', id=p.id) }}" method="POST" style="display:inline-block;">
                        <button class="btn-eliminar" onclick="return confirm('¿Eliminar producto?')">Eliminar</button>
                    </form>
                </td>
            </tr>
            {% endfor %}

        </tbody>

    </table>
</div>

{% endblock %}
